<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gabriel & Leliane - Lista de Presentes</title>

  <!-- Meta tags para WhatsApp e redes sociais -->
  <meta property="og:title" content="Gabriel & Leliane">
  <meta property="og:description" content="Escolha um presente especial para os noivos! üéÅüíï">
  <meta property="og:image" content="https://images.unsplash.com/photo-1511285560929-80b456fea0bc?w=800&h=600&fit=crop&crop=center">
  <meta property="og:url" content="">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Casamento Gabriel e Leliane">

  <!-- Meta tags espec√≠ficas para WhatsApp -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Gabriel e Leliane">
  <meta name="twitter:description" content="Escolha um presente especial para os noivos! üéÅüíï">
  <meta name="twitter:image" content="https://images.unsplash.com/photo-1511285560929-80b456fea0bc?w=800&h=600&fit=crop&crop=center">

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéÅ</text></svg>">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'elegant': ['Playfair Display', 'serif'],
            'sans': ['Inter', 'system-ui', 'sans-serif'],
          },
          colors: {
            rose: {
              50: '#fff1f2',
              100: '#ffe4e6',
              200: '#fecdd3',
              300: '#fda4af',
              400: '#fb7185',
              500: '#f43f5e',
              600: '#e11d48',
              700: '#be123c',
            },
            purple: {
              50: '#faf5ff',
              100: '#f3e8ff',
              500: '#a855f7',
              600: '#9333ea',
              700: '#7c3aed',
            }
          }
        }
      }
    }
  </script>

  <style>
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .gift-card {
      background: linear-gradient(145deg, #ffffff, #f8fafc);
      border: 1px solid #e2e8f0;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      overflow: hidden;
    }

    .gift-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
      transition: left 0.6s;
    }

    .gift-card:hover::before {
      left: 100%;
    }

    .gift-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      border-color: #a855f7;
    }

    .gift-value {
      background: linear-gradient(135deg, #a855f7, #ec4899);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 700;
    }

    .gift-description {
      color: #64748b;
      transition: color 0.3s ease;
    }

    .gift-card:hover .gift-description {
      color: #475569;
    }

    .floating-hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 10;
    }

    .heart {
      position: absolute;
      font-size: 20px;
      opacity: 0.7;
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 0.7;
      }
      90% {
        opacity: 0.7;
      }
      100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
      }
    }

    .supporter-card {
      background: linear-gradient(145deg, #ffffff, #f1f5f9);
      transition: all 0.3s ease;
    }

    .supporter-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    .pulse-heart {
      animation: pulse-heart 2s ease-in-out infinite;
    }

    @keyframes pulse-heart {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.1);
      }
    }

    .spinner {
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
  </style>
</head>

<body class="min-h-screen bg-gradient-to-br from-purple-50 via-rose-50 to-purple-100">
  <!-- Floating Hearts Background -->
  <div class="floating-hearts" id="floating-hearts"></div>

  <div class="container mx-auto px-4 py-8 max-w-6xl">
    <!-- Header -->
    <div class="text-center mb-16">
      <div class="mb-6">
        <span class="text-6xl pulse-heart inline-block">üíï</span>
      </div>
      <h1 class="text-5xl md:text-6xl font-bold text-gray-800 mb-4 italic ">Gabriel & Leliane</h1>
    </div>

    <!-- QR Code Section -->
    <div id="qr-section" class="bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg p-8 mb-16 hidden">
      <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center font-elegant flex items-center justify-center gap-3">
        <svg class="w-8 h-8 text-purple-500" fill="currentColor" viewBox="0 0 24 24">
          <path d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z"/>
        </svg>
        Escaneie o QR Code PIX
      </h2>
      <div id="qr-content"></div>
    </div>

    <!-- Lista de Presentes -->
    <div class="mb-16">
      <h2 class="text-3xl font-bold text-center mb-4 text-gray-800 font-elegant">
        üéÅ Lista de Presentes Especiais
      </h2>
      <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto">
        Cada presente representa um momento especial que os noivos querem viver juntos. 
        Escolha o que mais toca o seu cora√ß√£o! ‚ú®
      </p>
      
      <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
        <div class="gift-card rounded-2xl p-6 cursor-pointer" onclick="selecionarPresente(10, 'Paga o nosso caf√© em casal ‚òïüíë')">
          <div class="text-center">
            <div class="text-4xl mb-4">‚òïüíë</div>
            <div class="gift-value text-2xl mb-3">R$ 10</div>
            <p class="gift-description text-sm leading-relaxed">Paga o nosso caf√© em casal</p>
          </div>
        </div>

        <div class="gift-card rounded-2xl p-6 cursor-pointer" onclick="selecionarPresente(16, 'Paga o nosso sorvete üç¶')">
          <div class="text-center">
            <div class="text-4xl mb-4">üç¶</div>
            <div class="gift-value text-2xl mb-3">R$ 16</div>
            <p class="gift-description text-sm leading-relaxed">Paga o nosso sorvete</p>
          </div>
        </div>

        <div class="gift-card rounded-2xl p-6 cursor-pointer" onclick="selecionarPresente(26, 'Paga o nosso a√ßa√≠ refrescante ü•∂ü´ê')">
          <div class="text-center">
            <div class="text-4xl mb-4">ü•∂ü´ê</div>
            <div class="gift-value text-2xl mb-3">R$ 26</div>
            <p class="gift-description text-sm leading-relaxed">Paga o nosso a√ßa√≠ refrescante</p>
          </div>
        </div>

        <div class="gift-card rounded-2xl p-6 cursor-pointer" onclick="selecionarPresente(42, 'Paga a nossa pizza de sexta-feira üçï')">
          <div class="text-center">
            <div class="text-4xl mb-4">üçï</div>
            <div class="gift-value text-2xl mb-3">R$ 42</div>
            <p class="gift-description text-sm leading-relaxed">Paga a nossa pizza de sexta-feira</p>
          </div>
        </div>

        <div class="gift-card rounded-2xl p-6 cursor-pointer" onclick="selecionarPresente(67, 'Paga o nosso cinema com pipoca üé¨üçø')">
          <div class="text-center">
            <div class="text-4xl mb-4">üé¨üçø</div>
            <div class="gift-value text-2xl mb-3">R$ 67</div>
            <p class="gift-description text-sm leading-relaxed">Paga o nosso cinema com pipoca</p>
          </div>
        </div>

        <div class="gift-card rounded-2xl p-6 cursor-pointer" onclick="selecionarPresente(107, 'Paga o nosso rod√≠zio de sushi üç£ü•¢')">
          <div class="text-center">
            <div class="text-4xl mb-4">üç£ü•¢</div>
            <div class="gift-value text-2xl mb-3">R$ 107</div>
            <p class="gift-description text-sm leading-relaxed">Paga o nosso rod√≠zio de sushi</p>
          </div>
        </div>

        <div class="gift-card rounded-2xl p-6 cursor-pointer" onclick="selecionarPresente(171, 'Paga um jantar rom√¢ntico √† luz de velas üç∑üçù')">
          <div class="text-center">
            <div class="text-4xl mb-4">üç∑üçù</div>
            <div class="gift-value text-2xl mb-3">R$ 171</div>
            <p class="gift-description text-sm leading-relaxed">Paga um jantar rom√¢ntico √† luz de velas</p>
          </div>
        </div>

        <div class="gift-card rounded-2xl p-6 cursor-pointer" onclick="selecionarPresente(274, 'Pague nossa primeira conta de for√ßa e √°gua üí°üöø')">
          <div class="text-center">
            <div class="text-4xl mb-4">üí°üöø</div>
            <div class="gift-value text-2xl mb-3">R$ 274</div>
            <p class="gift-description text-sm leading-relaxed">Pague nossa primeira conta de for√ßa e √°gua</p>
          </div>
        </div>

        <div class="gift-card rounded-2xl p-6 cursor-pointer" onclick="selecionarPresente(438, 'Paga uma noite de hospedagem especial üè®üí´')">
          <div class="text-center">
            <div class="text-4xl mb-4">üè®üí´</div>
            <div class="gift-value text-2xl mb-3">R$ 438</div>
            <p class="gift-description text-sm leading-relaxed">Paga uma noite de hospedagem especial</p>
          </div>
        </div>

        <div class="gift-card rounded-2xl p-6 cursor-pointer" onclick="selecionarPresente(700, 'Pague a nossa primeira compra em casal üõí‚ù§Ô∏è')">
          <div class="text-center">
            <div class="text-4xl mb-4">üõí‚ù§Ô∏è</div>
            <div class="gift-value text-2xl mb-3">R$ 700</div>
            <p class="gift-description text-sm leading-relaxed">Pague a nossa primeira compra em casal</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de PIX -->
    <div id="modalPix" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4" onclick="fecharModalSeClicarFora(event)">
      <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-lg w-full mx-4 transform transition-all max-h-[90vh] overflow-y-auto">
        <div class="text-center mb-6">
          <div class="text-6xl mb-4" id="pixEmoji">üéÅ</div>
          <h3 class="text-2xl font-bold text-gray-800 mb-2 font-elegant">Finalizar Presente</h3>
          <div class="gift-value text-3xl mb-3" id="pixValor">R$ 0</div>
          <p class="text-gray-600 text-lg" id="pixDescricao">Descri√ß√£o do presente</p>
        </div>

        <!-- Formul√°rio -->
        <div class="space-y-4 mb-6">
          <div>
            <label for="modal-email" class="block text-sm font-semibold text-gray-700 mb-2">
              üìß Seu e-mail
            </label>
            <input type="email" id="modal-email" placeholder="exemplo@email.com" 
                   class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all">
          </div>
          
          <div>
            <label for="modal-descricao" class="block text-sm font-semibold text-gray-700 mb-2">
              üíù Mensagem carinhosa (opcional)
            </label>
            <textarea id="modal-descricao" placeholder="Deixe uma mensagem especial para os noivos..."
                      class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all resize-none h-20"></textarea>
          </div>
          
          <div>
            <label for="modal-valor" class="block text-sm font-semibold text-gray-700 mb-2">
              üí∞ Valor do presente
            </label>
            <input type="number" id="modal-valor" placeholder="0.00" step="0.01" min="1"
                   class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all">
          </div>
        </div>

        <!-- Loading Section -->
        <div id="modal-loading-section" class="hidden text-center mb-6">
          <div class="spinner w-8 h-8 border-4 border-purple-200 border-t-purple-500 rounded-full mx-auto mb-4"></div>
          <p class="text-gray-600 mb-2">Gerando PIX... aguarde</p>
          <p class="text-sm text-gray-500">
            Tempo restante: <span id="modal-contador-geracao" class="font-bold text-purple-600">45</span>s
          </p>
        </div>

        <!-- Seguran√ßa PIX -->
        <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-4 mb-6">
          <div class="flex items-center justify-center mb-2">
            <svg class="w-5 h-5 text-green-600 mr-2" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11H16V16H8V11H9.2V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.4,8.7 10.4,10V11H13.6V10C13.6,8.7 12.8,8.2 12,8.2Z"/>
            </svg>
            <span class="font-semibold text-gray-700 text-sm">Pagamento 100% Seguro</span>
          </div>
          <p class="text-xs text-gray-600 text-center">
            PIX √© regulamentado pelo Banco Central do Brasil
          </p>
        </div>

        <div class="flex gap-4">
          <button onclick="fecharModalPix()" class="flex-1 bg-gray-200 text-gray-700 font-semibold py-4 px-6 rounded-xl hover:bg-gray-300 transition-all duration-200">
            Cancelar
          </button>
          <button onclick="enviarPagamento()" id="modal-botao-gerar-pix" class="flex-1 bg-gradient-to-r from-purple-500 to-rose-500 text-white font-semibold py-4 px-6 rounded-xl hover:from-purple-600 hover:to-rose-600 transition-all duration-200 transform hover:scale-105 flex items-center justify-center gap-2">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"/>
            </svg>
            Gerar PIX
          </button>
        </div>
      </div>
    </div>

    <!-- Modal de Mensagem -->
    <div id="modalOverlay" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
      <div class="bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 transform transition-all">
        <p id="modalMessage" class="text-center text-gray-800 mb-6 text-lg"></p>
        <div class="text-center">
          <button onclick="fecharModal()" class="bg-gradient-to-r from-purple-500 to-rose-500 text-white font-semibold py-3 px-8 rounded-xl hover:from-purple-600 hover:to-rose-600 transition-all duration-200">
            OK
          </button>
        </div>
      </div>
    </div>

    <!-- Modal de Confirma√ß√£o -->
    <div id="modalConfirmacao" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
      <div class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 max-w-md w-full mx-4 transform transition-all">
        <p class="text-center text-gray-800 mb-6 text-lg">Tempo esgotado! Voc√™ conseguiu efetuar o pagamento?</p>
        <div class="flex gap-4">
          <button onclick="recarregarPagina()" class="flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold py-3 px-6 rounded-lg hover:from-red-600 hover:to-red-700 transition-all duration-200">
            N√£o
          </button>
          <button onclick="mostrarAgradecimento()" class="flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white font-semibold py-3 px-6 rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-200">
            Sim
          </button>
        </div>
      </div>
    </div>

    <!-- Lista de Apoiadores -->
    <div class="bg-white/70 backdrop-blur-sm rounded-3xl shadow-lg p-8 hover:shadow-xl transition-all duration-300">
      <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center font-elegant flex items-center justify-center gap-3">
        <span class="text-4xl">üåü</span>
        Agradecimentos Especiais
        <span class="text-4xl">üåü</span>
      </h2>
      <p class="text-center text-gray-600 mb-8 italic">
        Pessoas queridas que j√° contribu√≠ram para nossa felicidade ‚ú®
      </p>
      <div id="apoiadores" class="grid gap-6 md:grid-cols-2 lg:grid-cols-3"></div>
      <div id="no-apoiadores" class="text-center py-12 text-gray-500 hidden">
        <div class="text-6xl mb-4">üíù</div>
        <p class="text-lg">Seja o primeiro a presentear os noivos!</p>
      </div>
    </div>
  </div>

  <script>
    let presenteSelecionado = null;
    let contadorGeracao = null;
    let contadorPix = null;

    // Array para armazenar apoiadores
    let apoiadoresData = [];
    let apoiadoresVisiveis = 0;
    const apoiadoresPorPagina = 6;

    // Fun√ß√£o para criar cora√ß√µes flutuantes
    function criarCoracaoFlutuante() {
      const floating = document.getElementById('floating-hearts');
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.innerHTML = 'üíï';
      heart.style.left = Math.random() * 100 + '%';
      heart.style.animationDelay = Math.random() * 2 + 's';
      floating.appendChild(heart);

      setTimeout(() => {
        heart.remove();
      }, 6000);
    }

    // Criar cora√ß√µes periodicamente
    setInterval(criarCoracaoFlutuante, 3000);

    // Fun√ß√£o para selecionar presente
    function selecionarPresente(valor, descricao) {
      presenteSelecionado = { valor, descricao };
      
      // Mapear emojis espec√≠ficos para cada presente
      let emoji = 'üéÅ';
      if (descricao.includes('caf√©')) emoji = '‚òïüíë';
      else if (descricao.includes('sorvete')) emoji = 'üç¶';
      else if (descricao.includes('a√ßa√≠')) emoji = 'ü•∂ü´ê';
      else if (descricao.includes('pizza')) emoji = 'üçï';
      else if (descricao.includes('cinema')) emoji = 'üé¨üçø';
      else if (descricao.includes('sushi')) emoji = 'üç£ü•¢';
      else if (descricao.includes('jantar')) emoji = 'üç∑üçù';
      else if (descricao.includes('conta')) emoji = 'üí°üöø';
      else if (descricao.includes('hospedagem')) emoji = 'üè®üí´';
      else if (descricao.includes('compra')) emoji = 'üõí‚ù§Ô∏è';
      
      document.getElementById('pixEmoji').textContent = emoji;
      document.getElementById('pixValor').textContent = `R$ ${valor}`;
      document.getElementById('pixDescricao').textContent = descricao.replace(/[^\w\s\u00C0-\u017F]/g, '').trim();
      
      // Preencher valor no campo
      document.getElementById('modal-valor').value = valor;
      document.getElementById('modal-descricao').value = descricao;
      
      document.getElementById('modalPix').classList.remove('hidden');
      document.getElementById('modalPix').classList.add('flex');
    }

    // Fun√ß√£o para fechar modal PIX
    function fecharModalPix() {
      document.getElementById('modalPix').classList.add('hidden');
      document.getElementById('modalPix').classList.remove('flex');
      presenteSelecionado = null;
    }

    function fecharModalSeClicarFora(event) {
      if (event.target === document.getElementById('modalPix')) {
        fecharModalPix();
      }
    }

    // Fun√ß√£o para enviar pagamento
    async function enviarPagamento() {
      const email = document.getElementById('modal-email').value;
      const descricao = document.getElementById('modal-descricao').value;
      const valor = parseFloat(document.getElementById('modal-valor').value);

      if (!email || !valor) {
        mostrarModal("‚ö†Ô∏è Por favor, preencha o e-mail e o valor!");
        return;
      }

      if (valor <= 0) {
        mostrarModal("‚ö†Ô∏è O valor deve ser maior que zero!");
        return;
      }

      // Mostrar loading e iniciar contador
      mostrarLoading();
      iniciarContadorGeracao();

      // Desabilitar o bot√£o
      const botao = document.getElementById('modal-botao-gerar-pix');
      botao.disabled = true;
      botao.classList.add('opacity-50', 'cursor-not-allowed');

      try {
        const resposta = await fetch('https://presente-api-1.onrender.com/pagar', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({
            payer_email: email,
            description: descricao,
            transaction_amount: valor
          })
        });

        const data = await resposta.json();

        // Parar contador e esconder loading
        pararContadorGeracao();
        esconderLoading();

        // Reabilitar o bot√£o
        botao.disabled = false;
        botao.classList.remove('opacity-50', 'cursor-not-allowed');

        const qrSection = document.getElementById('qr-section');
        const qrContent = document.getElementById('qr-content');
        
        if (data.point_of_interaction?.transaction_data?.qr_code_base64) {
          // Fechar o modal automaticamente
          fecharModalPix();

          // Rolar para o topo da p√°gina automaticamente
          window.scrollTo({
            top: 0,
            behavior: 'smooth'
          });

          // Mostrar a se√ß√£o QR Code
          qrSection.classList.remove('hidden');

          qrContent.innerHTML = `
          <div class="text-center">
            <div class="flex justify-center mb-6">
              <img src="data:image/png;base64,${data.point_of_interaction.transaction_data.qr_code_base64}" 
                   alt="QR Code PIX" class="rounded-2xl shadow-lg max-w-sm border-4 border-purple-100">
            </div>
            <div class="mb-6 p-4 bg-gradient-to-r from-purple-50 to-rose-50 border border-purple-200 rounded-2xl">
              <p class="text-3xl font-bold text-gray-800 mb-2">R$ ${valor.toFixed(2).replace('.', ',')}</p>
              <p class="text-sm text-gray-600">${descricao}</p>
            </div>
            <h4 class="text-lg font-semibold text-gray-700 mb-4">üìã C√≥digo PIX para C√≥pia</h4>
            <div class="bg-gray-100 p-4 rounded-xl break-all text-sm font-mono text-gray-700 mb-6 max-h-32 overflow-y-auto">
              ${data.point_of_interaction.transaction_data.qr_code}
            </div>
            <button onclick="copiarCodigoPix('${data.point_of_interaction.transaction_data.qr_code}')" 
                    class="w-full bg-gradient-to-r from-purple-500 to-rose-500 text-white font-semibold py-4 px-6 rounded-xl hover:from-purple-600 hover:to-rose-600 transform hover:scale-105 transition-all duration-200 mb-6 flex items-center justify-center gap-2">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
              </svg>
              Copiar C√≥digo PIX
            </button>
            <div id="contador-pix" class="text-center bg-gradient-to-r from-red-50 to-orange-50 rounded-xl p-4">
              <div class="text-lg font-semibold text-gray-700 mb-2 flex items-center justify-center gap-2">
                <svg class="w-5 h-5 text-orange-600" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C6.47,22 2,17.5 2,12A10,10 0 0,1 12,2M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"/>
                </svg>
                Tempo restante para pagamento:
              </div>
              <div id="tempo-restante" class="text-2xl font-bold text-red-600"></div>
            </div>
          </div>
        `;

          // Inicia contagem de 2 minutos
          iniciarContadorPix(120); // 120 segundos = 2 minutos
        } else {
          qrSection.classList.remove('hidden');
          qrContent.innerHTML = `
            <div class="bg-red-50 border border-red-200 rounded-2xl p-6 text-center">
              <div class="text-4xl mb-4">‚ùå</div>
              <p class="text-red-600 font-semibold">Erro ao gerar PIX</p>
              <p class="text-red-500 text-sm mt-2">Tente novamente em alguns instantes</p>
            </div>
          `;
        }
      } catch (error) {
        // Em caso de erro, parar contador e esconder loading
        pararContadorGeracao();
        esconderLoading();

        // Reabilitar o bot√£o
        botao.disabled = false;
        botao.classList.remove('opacity-50', 'cursor-not-allowed');

        // Mostrar erro
        const qrSection = document.getElementById('qr-section');
        const qrContent = document.getElementById('qr-content');
        qrSection.classList.remove('hidden');
        qrContent.innerHTML = `
          <div class="bg-red-50 border border-red-200 rounded-2xl p-6 text-center">
            <div class="text-4xl mb-4">‚ùå</div>
            <p class="text-red-600 font-semibold">Erro de conex√£o</p>
            <p class="text-red-500 text-sm mt-2">Verifique sua internet e tente novamente</p>
          </div>
        `;
      }
    }

    function mostrarLoading() {
      document.getElementById('modal-loading-section').classList.remove('hidden');
    }

    function esconderLoading() {
      document.getElementById('modal-loading-section').classList.add('hidden');
    }

    function iniciarContadorGeracao() {
      let tempoRestante = 45;
      const contadorElement = document.getElementById('modal-contador-geracao');

      contadorGeracao = setInterval(() => {
        contadorElement.textContent = tempoRestante;

        if (tempoRestante <= 0) {
          pararContadorGeracao();
          esconderLoading();

          // Reabilitar o bot√£o
          const botao = document.getElementById('modal-botao-gerar-pix');
          botao.disabled = false;
          botao.classList.remove('opacity-50', 'cursor-not-allowed');

          // Mostrar mensagem de timeout
          mostrarModal("‚è∞ Tempo esgotado para gerar o PIX. Tente novamente.");
        }

        tempoRestante--;
      }, 1000);
    }

    function pararContadorGeracao() {
      if (contadorGeracao) {
        clearInterval(contadorGeracao);
        contadorGeracao = null;
      }
    }

    function iniciarContadorPix(segundos) {
      let tempoRestante = segundos;
      const tempoElement = document.getElementById('tempo-restante');

      contadorPix = setInterval(() => {
        const minutos = Math.floor(tempoRestante / 60);
        const segundosRestantes = tempoRestante % 60;
        
        tempoElement.textContent = `${minutos.toString().padStart(2, '0')}:${segundosRestantes.toString().padStart(2, '0')}`;

        if (tempoRestante <= 0) {
          clearInterval(contadorPix);
          // Mostrar modal de confirma√ß√£o
          document.getElementById('modalConfirmacao').classList.remove('hidden');
          document.getElementById('modalConfirmacao').classList.add('flex');
        }

        tempoRestante--;
      }, 1000);
    }

    function mostrarModal(mensagem) {
      document.getElementById('modalMessage').innerText = mensagem;
      document.getElementById('modalOverlay').classList.remove('hidden');
      document.getElementById('modalOverlay').classList.add('flex');
    }

    function fecharModal() {
      document.getElementById('modalOverlay').classList.add('hidden');
      document.getElementById('modalOverlay').classList.remove('flex');
    }

    function recarregarPagina() {
      // Fechar modal de confirma√ß√£o
      document.getElementById('modalConfirmacao').classList.add('hidden');
      document.getElementById('modalConfirmacao').classList.remove('flex');
      
      // Reiniciar contador PIX por mais 2 minutos
      iniciarContadorPix(120);
    }

    function mostrarAgradecimento() {
      // Fechar modal de confirma√ß√£o
      document.getElementById('modalConfirmacao').classList.add('hidden');
      document.getElementById('modalConfirmacao').classList.remove('flex');
      
      // Mostrar modal de agradecimento
      const modalAgradecimento = `
        <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-lg w-full mx-4 transform transition-all text-center">
          <div class="text-6xl mb-6">üéâ</div>
          <h3 class="text-2xl font-bold text-gray-800 mb-4 font-elegant">Muito Obrigado!</h3>
          <div class="bg-gradient-to-r from-green-50 to-purple-50 rounded-2xl p-6 mb-6">
            <p class="text-gray-700 leading-relaxed mb-4">
              üíï <strong>Pagamento confirmado com sucesso!</strong>
            </p>
            <p class="text-gray-600 text-sm leading-relaxed">
              Seu nome aparecer√° em breve na nossa se√ß√£o de <strong>"Agradecimentos Especiais"</strong>. 
              Voc√™ faz parte dos momentos felizes dos noivos Gabriel & Leliane! ‚ú®
            </p>
          </div>
          <div class="flex items-center justify-center gap-2 mb-6 text-rose-500">
            <span class="text-2xl">üíù</span>
            <span class="font-semibold">Presente entregue com amor</span>
            <span class="text-2xl">üíù</span>
          </div>
          <button onclick="fecharAgradecimentoERecarregar()" class="w-full bg-gradient-to-r from-green-500 to-purple-500 text-white font-semibold py-4 px-6 rounded-xl hover:from-green-600 hover:to-purple-600 transition-all duration-200 transform hover:scale-105">
            ‚ú® Continuar Navegando
          </button>
        </div>
      `;
      
      document.getElementById('modalOverlay').innerHTML = modalAgradecimento;
      document.getElementById('modalOverlay').classList.remove('hidden');
      document.getElementById('modalOverlay').classList.add('flex');
    }
    
    function fecharAgradecimentoERecarregar() {
      location.reload();
    }

    function copiarCodigoPix(codigo) {
      // M√©todo 1: Tentar usar navigator.clipboard
      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(codigo).then(() => {
          mostrarModal("üìã C√≥digo PIX copiado com sucesso!");
        }).catch(() => {
          copiarCodigoFallback(codigo);
        });
      } else {
        copiarCodigoFallback(codigo);
      }
    }

    function copiarCodigoFallback(codigo) {
      try {
        const textArea = document.createElement('textarea');
        textArea.value = codigo;
        textArea.style.position = 'fixed';
        textArea.style.left = '-999999px';
        textArea.style.top = '-999999px';
        document.body.appendChild(textArea);

        textArea.focus();
        textArea.select();

        const successful = document.execCommand('copy');
        document.body.removeChild(textArea);

        if (successful) {
          mostrarModal("üìã C√≥digo PIX copiado com sucesso!");
        } else {
          mostrarCodigoParaCopiaManual(codigo);
        }
      } catch (err) {
        mostrarCodigoParaCopiaManual(codigo);
      }
    }

    function mostrarCodigoParaCopiaManual(codigo) {
      const modalHTML = `
        <div class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 max-w-lg w-full mx-4 transform transition-all">
          <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">üìã Copie o C√≥digo PIX</h3>
          <div class="bg-gray-100 p-4 rounded-lg border break-all text-sm font-mono mb-4 max-h-40 overflow-y-auto">
            ${codigo}
          </div>
          <p class="text-sm text-gray-600 mb-4 text-center">Selecione todo o c√≥digo acima e copie manualmente</p>
          <button onclick="fecharModal()" class="w-full bg-gradient-to-r from-purple-500 to-rose-500 text-white font-semibold py-3 px-6 rounded-xl hover:from-purple-600 hover:to-rose-600 transition-all duration-200">
            Fechar
          </button>
        </div>
      `;
      
      document.getElementById('modalOverlay').innerHTML = modalHTML;
      document.getElementById('modalOverlay').classList.remove('hidden');
      document.getElementById('modalOverlay').classList.add('flex');
    }

    // Carregar apoiadores do arquivo JSON
    async function carregarApoiadores() {
      try {
        const response = await fetch('./apoiadores.json');
        apoiadoresData = await response.json();
        apoiadoresVisiveis = 0;
        renderApoiadores();
      } catch (error) {
        console.error('Erro ao carregar apoiadores:', error);
        apoiadoresVisiveis = 0;
        renderApoiadores();
      }
    }

    function renderApoiadores() {
      const container = document.getElementById('apoiadores');
      const noApoiadores = document.getElementById('no-apoiadores');

      if (apoiadoresData.length === 0) {
        container.innerHTML = '';
        noApoiadores.classList.remove('hidden');
        return;
      }

      // Se √© a primeira renderiza√ß√£o, limpa o container
      if (apoiadoresVisiveis === 0) {
        container.innerHTML = '';
      }

      // Calcula quantos apoiadores mostrar
      const proximosApoiadores = Math.min(apoiadoresVisiveis + apoiadoresPorPagina, apoiadoresData.length);

      // Adiciona os novos apoiadores
      for (let i = apoiadoresVisiveis; i < proximosApoiadores; i++) {
        const apoiador = apoiadoresData[i];
        const div = document.createElement('div');
        div.className = 'supporter-card rounded-2xl p-6 border border-purple-100';
        div.innerHTML = `
          <div class="text-center">
            <div class="text-3xl mb-3">üíù</div>
            <h3 class="font-semibold text-gray-800 mb-2 text-lg">${apoiador.nome}</h3>
            ${apoiador.mensagem ? `<p class="text-gray-600 text-sm italic leading-relaxed">"${apoiador.mensagem}"</p>` : ''}
            <div class="mt-4 text-xs text-gray-400 flex items-center justify-center gap-1">
              <span>‚ú®</span>
              Agradecimento Especial
              <span>‚ú®</span>
            </div>
          </div>
        `;
        container.appendChild(div);
      }

      // Atualiza o contador de apoiadores vis√≠veis
      apoiadoresVisiveis = proximosApoiadores;

      // Remove bot√£o anterior se existir
      const botaoAnterior = document.getElementById('botao-carregar-mais');
      if (botaoAnterior) {
        botaoAnterior.remove();
      }

      // Adiciona bot√£o "Carregar Mais" se ainda h√° apoiadores para mostrar
      if (apoiadoresVisiveis < apoiadoresData.length) {
        const botaoCarregarMais = document.createElement('div');
        botaoCarregarMais.id = 'botao-carregar-mais';
        botaoCarregarMais.className = 'col-span-full text-center mt-4';
        botaoCarregarMais.innerHTML = `
          <button onclick="carregarMaisApoiadores()" 
                  class="bg-gradient-to-r from-purple-500 to-rose-500 text-white font-semibold py-3 px-8 rounded-xl hover:from-purple-600 hover:to-rose-600 transform hover:scale-105 transition-all duration-200 shadow-md">
            Carregar Mais
          </button>
        `;
        container.appendChild(botaoCarregarMais);
      }

      noApoiadores.classList.add('hidden');
    }

    function carregarMaisApoiadores() {
      renderApoiadores();
    }

    // Carregar apoiadores quando a p√°gina carregar
    document.addEventListener('DOMContentLoaded', carregarApoiadores);

    // Fechar modal com ESC
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        fecharModalPix();
        fecharModal();
      }
    });
  </script>
</body>

</html>